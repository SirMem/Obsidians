---
Project: "[[åˆ†æ²»]]"
Status: ğŸŸ¨
tags:
  - Resources
Deadline: 2024-03-22
CreateTime: 2024-03-21
Connected:
---

# åŸºäºåˆ†æ²»å®ç°äºŒåˆ†
```cpp
ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º ğ‘› çš„æœ‰åºæ•°ç»„ nums ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè¯·æŸ¥æ‰¾å…ƒç´  target ã€‚
```
ä»åˆ†æ²»è§’åº¦ï¼Œæˆ‘ä»¬å°†æœç´¢åŒºé—´ [ğ‘–, ğ‘—] å¯¹åº”çš„å­é—®é¢˜è®°ä¸º ğ‘“(ğ‘–, ğ‘—) ã€‚
ä»åŸé—®é¢˜ ğ‘“(0, ğ‘› âˆ’ 1) ä¸ºèµ·å§‹ç‚¹ï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚
1. è®¡ç®—æœç´¢åŒºé—´ [ğ‘–, ğ‘—] çš„ä¸­ç‚¹ ğ‘š ï¼Œæ ¹æ®å®ƒæ’é™¤ä¸€åŠæœç´¢åŒºé—´ã€‚
2. é€’å½’æ±‚è§£è§„æ¨¡å‡å°ä¸€åŠçš„å­é—®é¢˜ï¼Œå¯èƒ½ä¸º ğ‘“(ğ‘–, ğ‘š âˆ’ 1) æˆ– ğ‘“(ğ‘š + 1, ğ‘—) ã€‚
3. å¾ªç¯ç¬¬ 1. å’Œ 2. æ­¥ï¼Œç›´è‡³æ‰¾åˆ° target æˆ–åŒºé—´ä¸ºç©ºæ—¶è¿”å›ã€‚
![[BAvMXOSKbrXnYZww-cced5e6b-b052-0360-9538-d5f9d5f329d2.png|748]]
```cpp
/* äºŒåˆ†æŸ¥æ‰¾ï¼šé—®é¢˜ f(i, j) */
int dfs(vector<int> &nums , int target , int i ,int j)
{
	//è‹¥åŒºé—´ä¸ºç©ºï¼Œç›´æ¥è¿”å›é€€å‡º
	if(i > j)
		return -1;

	//è®¡ç®—ä¸­ç‚¹ç´¢å¼•
	int m = (i + j)/2;
	if(nums[m] > target)
		return dfs(nums,target,mid + 1,j);
	else if(nums[m] < target) 
		return dfs(nums,target,i,mid-1);
	else
		return m;
}
```

# æ„å»ºäºŒå‰æ ‘é—®é¢˜
```cpp
ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„å‰åºéå† preorder å’Œä¸­åºéå† inorder ï¼Œè¯·ä»ä¸­æ„å»ºäºŒå‰æ ‘ï¼Œè¿”å›äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚
```
![[BAvMXOSKbrXnYZww-d2231093-3acd-1adb-496a-baf893a0022c.png|687]]
[[äºŒå‰æœç´¢æ ‘çš„å„ç±»æ“ä½œ]]
## åˆ¤æ–­æ˜¯å¦ä¸ºåˆ†æ²»é—®é¢˜
åŸé—®é¢˜å®šä¹‰ä¸ºä» preorder å’Œ inorder æ„å»ºäºŒå‰æ ‘ï¼Œå…¶æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†æ²»é—®é¢˜ã€‚
- é—®é¢˜å¯ä»¥è¢«åˆ†è§£ï¼šä»åˆ†æ²»çš„è§’åº¦åˆ‡å…¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸé—®é¢˜åˆ’åˆ†ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼šæ„å»ºå·¦å­æ ‘ã€æ„å»ºå³å­æ ‘ï¼ŒåŠ ä¸Šä¸€æ­¥æ“ä½œï¼šåˆå§‹åŒ–æ ¹èŠ‚ç‚¹ã€‚è€Œå¯¹äºæ¯ä¸ªå­æ ‘ï¼ˆå­é—®é¢˜ï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥å¤ç”¨ä»¥ä¸Šåˆ’åˆ†æ–¹æ³•ï¼Œå°†å…¶åˆ’åˆ†ä¸ºæ›´å°çš„å­æ ‘ï¼ˆå­é—®é¢˜ï¼‰ï¼Œç›´è‡³è¾¾åˆ°æœ€å°å­é—®é¢˜ï¼ˆç©ºå­æ ‘ï¼‰æ—¶ç»ˆæ­¢ã€‚
- å­é—®é¢˜æ˜¯ç‹¬ç«‹çš„ï¼šå·¦å­æ ‘å’Œå³å­æ ‘æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰äº¤é›†ã€‚åœ¨æ„å»ºå·¦å­æ ‘æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸­åºéå†å’Œå‰åºéå†ä¸­ä¸å·¦å­æ ‘å¯¹åº”çš„éƒ¨åˆ†ã€‚å³å­æ ‘åŒç†ã€‚
- å­é—®é¢˜çš„è§£å¯ä»¥åˆå¹¶ï¼šä¸€æ—¦å¾—åˆ°äº†å·¦å­æ ‘å’Œå³å­æ ‘ï¼ˆå­é—®é¢˜çš„è§£ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒä»¬é“¾æ¥åˆ°æ ¹èŠ‚ç‚¹ä¸Šï¼Œå¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚
## å¦‚ä½•åˆ’åˆ†å­æ ‘
æ ¹æ®å®šä¹‰ï¼Œpreorder å’Œ inorder éƒ½å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚
- å‰åºéå†ï¼š[ æ ¹èŠ‚ç‚¹ | å·¦å­æ ‘ | å³å­æ ‘ ] ï¼Œä¾‹å¦‚å›¾ 12â€‘5 çš„æ ‘å¯¹åº” [ 3 | 9 | 2 1 7 ] ã€‚
- ä¸­åºéå†ï¼š[ å·¦å­æ ‘ | æ ¹èŠ‚ç‚¹ ï½œ å³å­æ ‘ ] ï¼Œä¾‹å¦‚å›¾ 12â€‘5 çš„æ ‘å¯¹åº” [ 9 | 3 | 1 2 7 ] ã€‚
ä»¥å›¾æ•°æ®ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å›¾ç¤ºçš„æ­¥éª¤å¾—åˆ°åˆ’åˆ†ç»“æœã€‚
1. å‰åºéå†çš„é¦–å…ƒç´  3 æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ã€‚
2. æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ 3 åœ¨ inorder ä¸­çš„ç´¢å¼•ï¼Œåˆ©ç”¨è¯¥ç´¢å¼•å¯å°† inorder åˆ’åˆ†ä¸º [ 9 | 3 ï½œ 1 2 7 ] ã€‚
3. æ ¹æ® inorder åˆ’åˆ†ç»“æœï¼Œæ˜“å¾—å·¦å­æ ‘å’Œå³å­æ ‘çš„èŠ‚ç‚¹æ•°é‡åˆ†åˆ«ä¸º 1 å’Œ 3 ï¼Œä»è€Œå¯å°† preorder åˆ’åˆ†ä¸º
[ 3 | 9 | 2 1 7 ] ã€‚
![[BAvMXOSKbrXnYZww-e218c65e-d267-1a33-8cee-1195b2aac914.png|737]]

## åŸºäºå˜é‡æè¿°å­æ ‘åŒºé—´
æˆ‘ä»¬å·²ç»å¾—åˆ°æ ¹èŠ‚ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘åœ¨ preorder å’Œ inorder ä¸­çš„ç´¢å¼•åŒºé—´ã€‚è€Œä¸ºäº†æè¿°è¿™äº›ç´¢å¼•åŒºé—´ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©å‡ ä¸ªæŒ‡é’ˆå˜é‡ã€‚
- å°†å½“å‰æ ‘çš„æ ¹èŠ‚ç‚¹åœ¨ preorder ä¸­çš„ç´¢å¼•è®°ä¸º ğ‘– ã€‚
- å°†å½“å‰æ ‘çš„æ ¹èŠ‚ç‚¹åœ¨ inorder ä¸­çš„ç´¢å¼•è®°ä¸º ğ‘š ã€‚
- å°†å½“å‰æ ‘åœ¨ inorder ä¸­çš„ç´¢å¼•åŒºé—´è®°ä¸º [ğ‘™, ğ‘Ÿ] ã€‚
![[BAvMXOSKbrXnYZww-9c0c5f08-0ee5-16b7-9db6-20196dfda551.png|1046]]

## ä»£ç å®ç°
ä¸ºäº†æå‡æŸ¥è¯¢ ğ‘š çš„æ•ˆç‡ï¼Œæˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªå“ˆå¸Œè¡¨ hmap æ¥å­˜å‚¨æ•°ç»„ inorder ä¸­å…ƒç´ åˆ°ç´¢å¼•çš„æ˜ å°„ã€‚(åŠ¨æ€è§„åˆ’)
```cpp
// === File: build_tree.cpp ===
/* æ„å»ºäºŒå‰æ ‘ï¼šåˆ†æ²» */
TreeNode *dfs(vector<int> &preorder, vector<int> &inorder, unordered_map<int, int> &hmap, int i, int l,int r) {
	// å­æ ‘åŒºé—´ä¸ºç©ºæ—¶ç»ˆæ­¢
	if (r - l < 0)
		return NULL;
	// åˆå§‹åŒ–æ ¹èŠ‚ç‚¹
	TreeNode *root = new TreeNode(preorder[i]);
	// æŸ¥è¯¢ m ï¼Œä»è€Œåˆ’åˆ†å·¦å³å­æ ‘
	int m = hmap[preorder[i]];
	// å­é—®é¢˜ï¼šæ„å»ºå·¦å­æ ‘
	root->left = dfs(preorder, inorder, hmap, i + 1, l, m - 1);
	// å­é—®é¢˜ï¼šæ„å»ºå³å­æ ‘
	root->right = dfs(preorder, inorder, hmap, i + 1 + m - l, m + 1, r);
	// è¿”å›æ ¹èŠ‚ç‚¹
	return root;
}
/* æ„å»ºäºŒå‰æ ‘ */
TreeNode *buildTree(vector<int> &preorder, vector<int> &inorder) {
	// åˆå§‹åŒ–å“ˆå¸Œè¡¨ï¼Œå­˜å‚¨ inorder å…ƒç´ åˆ°ç´¢å¼•çš„æ˜ å°„
	unordered_map<int, int> hmap;
	for (int i = 0; i < inorder.size(); i++) {
		hmap[inorder[i]] = i;
	}
	TreeNode *root = dfs(preorder, inorder, hmap, 0, 0, inorder.size() - 1);
	return root;
}
```
![[BAvMXOSKbrXnYZww-632df89e-52e3-0ca7-c307-2be67a54e285.png|937]]
![[BAvMXOSKbrXnYZww-1205b8dd-c39d-5853-688c-04727b1af077.png|941]]
æ¯ä¸ªé€’å½’å‡½æ•°å†…çš„å‰åºéå† preorder å’Œä¸­åºéå† inorder çš„åˆ’åˆ†ç»“æœå¦‚å›¾æ‰€ç¤ºã€‚
![[BAvMXOSKbrXnYZww-63ccb91c-f3bb-2209-5665-10d2541f3f43.png|746]]