---
Project: "[[4-Archives/Project of Archives/æ•°æ®ç»“æ„/é˜Ÿåˆ—|é˜Ÿåˆ—]]"
Status: ğŸŸ¨
tags:
  - Resources
Deadline: 2024-03-17
CreateTime: 2024-03-17
Connected:
  - "[[é˜Ÿåˆ—åŸºæœ¬å†…å®¹]]"
---
# ä»‹ç»
ã€ŒåŒå‘é˜Ÿåˆ— dequeã€æä¾›äº†æ›´é«˜çš„çµæ´»æ€§ï¼Œå…è®¸åœ¨å¤´éƒ¨å’Œå°¾éƒ¨æ‰§è¡Œå…ƒç´ çš„æ·»åŠ æˆ–åˆ é™¤æ“ä½œã€‚
![[BAvMXOSKbrXnYZww-776248b7-75a2-27e9-e68b-14209f5fc366.png|676]]
# å¸¸ç”¨æ“ä½œ
## STL
```cpp
/* åˆå§‹åŒ–åŒå‘é˜Ÿåˆ— */
deque<int> deque;
/* å…ƒç´ å…¥é˜Ÿ */
deque.push_back(2);
// æ·»åŠ è‡³é˜Ÿå°¾
deque.push_back(5);
deque.push_back(4);
deque.push_front(3); // æ·»åŠ è‡³é˜Ÿé¦–
deque.push_front(1);
/* è®¿é—®å…ƒç´  */
int front = deque.front(); // é˜Ÿé¦–å…ƒç´ 
int back = deque.back();
// é˜Ÿå°¾å…ƒç´ 
/* å…ƒç´ å‡ºé˜Ÿ */
deque.pop_front(); // é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿ
deque.pop_back();
// é˜Ÿå°¾å…ƒç´ å‡ºé˜Ÿ
/* è·å–åŒå‘é˜Ÿåˆ—çš„é•¿åº¦ */
int size = deque.size();
/* åˆ¤æ–­åŒå‘é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º */
bool empty = deque.empty();
```
## åŒå‘é“¾è¡¨
![[BAvMXOSKbrXnYZww-4317b66e-ef83-42b6-090b-5ba62db2fa10.png|933]]
```cpp
/* åŒå‘é“¾è¡¨èŠ‚ç‚¹ */
struct DoublyListNode {
	int val;
	// èŠ‚ç‚¹å€¼
	DoublyListNode *next; // åç»§èŠ‚ç‚¹æŒ‡é’ˆ
	DoublyListNode *prev; // å‰é©±èŠ‚ç‚¹æŒ‡é’ˆ
	DoublyListNode(int val) : val(val), prev(nullptr), next(nullptr) {
	}
};

/* åŸºäºåŒå‘é“¾è¡¨å®ç°çš„åŒå‘é˜Ÿåˆ— */
class LinkedListDeque {
	private:
		DoublyListNode *front, *rear; // å¤´èŠ‚ç‚¹ front ï¼Œå°¾èŠ‚ç‚¹ rear
		int queSize = 0; // åŒå‘é˜Ÿåˆ—çš„é•¿åº¦		
	public:
		/* æ„é€ æ–¹æ³• */
		LinkedListDeque() : front(nullptr), rear(nullptr) {}
		/* ææ„æ–¹æ³• */
		~LinkedListDeque() {
			// éå†é“¾è¡¨åˆ é™¤èŠ‚ç‚¹ï¼Œé‡Šæ”¾å†…å­˜
			DoublyListNode *pre, *cur = front;
			while (cur != nullptr) {
				pre = cur;
				cur = cur->next;
				delete pre;
			}
		}
		/* è·å–åŒå‘é˜Ÿåˆ—çš„é•¿åº¦ */
		int size() {
			return queSize;
		}
		/* åˆ¤æ–­åŒå‘é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º */
		bool isEmpty() {
			return size() == 0;
		}
		/* å…¥é˜Ÿæ“ä½œ */
		void push(int num, bool isFront) {
			DoublyListNode *node = new DoublyListNode(num);
			// è‹¥é“¾è¡¨ä¸ºç©ºï¼Œåˆ™ä»¤ front, rear éƒ½æŒ‡å‘ node
			if (isEmpty())
				front = rear = node;
			// é˜Ÿé¦–å…¥é˜Ÿæ“ä½œ
			else if (isFront) {
				// å°† node æ·»åŠ è‡³é“¾è¡¨å¤´éƒ¨
				front->prev = node;
				node->next = front;
				front = node; // æ›´æ–°å¤´èŠ‚ç‚¹
			// é˜Ÿå°¾å…¥é˜Ÿæ“ä½œ
			} else {
				// å°† node æ·»åŠ è‡³é“¾è¡¨å°¾éƒ¨
				rear->next = node;
				node->prev = rear;
				rear = node; // æ›´æ–°å°¾èŠ‚ç‚¹
			}
			queSize++; // æ›´æ–°é˜Ÿåˆ—é•¿åº¦
		}
		/* é˜Ÿé¦–å…¥é˜Ÿ */
		void pushFirst(int num) {
			push(num, true);
		}
		/* é˜Ÿå°¾å…¥é˜Ÿ */
		void pushLast(int num) {
			push(num, false);
		}
		/* å‡ºé˜Ÿæ“ä½œ */
		int pop(bool isFront) {
			// è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è¿”å› -1
			if (isEmpty())
				return -1;
			int val;
			// é˜Ÿé¦–å‡ºé˜Ÿæ“ä½œ
			if (isFront) {
				val = front->val; // æš‚å­˜å¤´èŠ‚ç‚¹å€¼
				// åˆ é™¤å¤´èŠ‚ç‚¹
				DoublyListNode *fNext = front->next;
				if (fNext != nullptr) {
					fNext->prev = nullptr;
					front->next = nullptr;
					delete front;
				}
				front = fNext; // æ›´æ–°å¤´èŠ‚ç‚¹
			// é˜Ÿå°¾å‡ºé˜Ÿæ“ä½œ
			} else {
				val = rear->val; // æš‚å­˜å°¾èŠ‚ç‚¹å€¼
				// åˆ é™¤å°¾èŠ‚ç‚¹
				DoublyListNode *rPrev = rear->prev;
				if (rPrev != nullptr) {
					rPrev->next = nullptr;
					rear->prev = nullptr;
					delete rear;
				}
				rear = rPrev; // æ›´æ–°å°¾èŠ‚ç‚¹
			}
			queSize--; // æ›´æ–°é˜Ÿåˆ—é•¿åº¦
			return val;
		}
		/* é˜Ÿé¦–å‡ºé˜Ÿ */
		int popFirst() {
			return pop(true);
		}
		/* é˜Ÿå°¾å‡ºé˜Ÿ */
		int popLast() {
			return pop(false);
		}
		/* è®¿é—®é˜Ÿé¦–å…ƒç´  */
		int peekFirst() {
			return isEmpty() ? -1 : front->val;
		}
		/* è®¿é—®é˜Ÿå°¾å…ƒç´  */
		int peekLast() {
			return isEmpty() ? -1 : rear->val;
		}
		/* è¿”å›æ•°ç»„ç”¨äºæ‰“å° */
		vector<int> toVector() {
			DoublyListNode *node = front;
			vector<int> res(size());
			for (int i = 0; i < res.size(); i++) {
				res[i] = node->val;
				node = node->next;
			}
			return res;
		}
};

```

## æ•°ç»„
![[BAvMXOSKbrXnYZww-35d9cf16-cb4e-f357-a960-ba53d4664650.png|939]]
åœ¨é˜Ÿåˆ—çš„å®ç°åŸºç¡€ä¸Šï¼Œä»…éœ€å¢åŠ â€œé˜Ÿé¦–å…¥é˜Ÿâ€å’Œâ€œé˜Ÿå°¾å‡ºé˜Ÿâ€çš„æ–¹æ³•ã€‚
```cpp
/* åŸºäºç¯å½¢æ•°ç»„å®ç°çš„åŒå‘é˜Ÿåˆ— */
class ArrayDeque {
	private:
		vector<int> nums; // ç”¨äºå­˜å‚¨åŒå‘é˜Ÿåˆ—å…ƒç´ çš„æ•°ç»„
		int front; // é˜Ÿé¦–æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿé¦–å…ƒç´ 
		int queSize; // åŒå‘é˜Ÿåˆ—é•¿åº¦
	public:
		/* æ„é€ æ–¹æ³• */
		ArrayDeque(int capacity) {
			nums.resize(capacity);
			front = queSize = 0;
		}
		/* è·å–åŒå‘é˜Ÿåˆ—çš„å®¹é‡ */
		int capacity() {
			return nums.size();
		}
		/* è·å–åŒå‘é˜Ÿåˆ—çš„é•¿åº¦ */
		int size() {
			return queSize;
		}
		/* åˆ¤æ–­åŒå‘é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º */
		bool isEmpty() {
			return queSize == 0;
		}
		/* è®¡ç®—ç¯å½¢æ•°ç»„ç´¢å¼• */
		int index(int i) {
		// é€šè¿‡å–ä½™æ“ä½œå®ç°æ•°ç»„é¦–å°¾ç›¸è¿
		// å½“ i è¶Šè¿‡æ•°ç»„å°¾éƒ¨åï¼Œå›åˆ°å¤´éƒ¨
		// å½“ i è¶Šè¿‡æ•°ç»„å¤´éƒ¨åï¼Œå›åˆ°å°¾éƒ¨
			return (i + capacity()) % capacity();
		}
		/* é˜Ÿé¦–å…¥é˜Ÿ */
		void pushFirst(int num) {
			if (queSize == capacity()) {
				cout << " åŒå‘é˜Ÿåˆ—å·²æ»¡" << endl;
				return;
			}
			// é˜Ÿé¦–æŒ‡é’ˆå‘å·¦ç§»åŠ¨ä¸€ä½
			// é€šè¿‡å–ä½™æ“ä½œï¼Œå®ç° front è¶Šè¿‡æ•°ç»„å¤´éƒ¨åå›åˆ°å°¾éƒ¨
			front = index(front - 1);
			// å°† num æ·»åŠ è‡³é˜Ÿé¦–
			nums[front] = num;
			queSize++;
		}
		/* é˜Ÿå°¾å…¥é˜Ÿ */
		void pushLast(int num) {
			if (queSize == capacity()) {
				cout << " åŒå‘é˜Ÿåˆ—å·²æ»¡" << endl;
				return;
			}
			// è®¡ç®—å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿå°¾ç´¢å¼• + 1
			int rear = index(front + queSize);
			// å°† num æ·»åŠ è‡³é˜Ÿå°¾
			nums[rear] = num;
			queSize++;
		}
		/* é˜Ÿé¦–å‡ºé˜Ÿ */
		int popFirst() {
			int num = peekFirst();
			// é˜Ÿé¦–æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½
			front = index(front + 1);
			queSize--;
			return num;
		}
		/* é˜Ÿå°¾å‡ºé˜Ÿ */
		int popLast() {
			int num = peekLast();
			queSize--;
			return num;
		}
		/* è®¿é—®é˜Ÿé¦–å…ƒç´  */
		int peekFirst() {
			if (isEmpty())
				throw out_of_range(" åŒå‘é˜Ÿåˆ—ä¸ºç©º");
			return nums[front];
		}
		/* è®¿é—®é˜Ÿå°¾å…ƒç´  */
		int peekLast() {
			if (isEmpty())
				throw out_of_range(" åŒå‘é˜Ÿåˆ—ä¸ºç©º");
			// è®¡ç®—å°¾å…ƒç´ ç´¢å¼•
			int last = index(front + queSize - 1);
			return nums[last];
		}
		/* è¿”å›æ•°ç»„ç”¨äºæ‰“å° */
		vector<int> toVector() {
			// ä»…è½¬æ¢æœ‰æ•ˆé•¿åº¦èŒƒå›´å†…çš„åˆ—è¡¨å…ƒç´ 
			vector<int> res(queSize);
			for (int i = 0, j = front; i < queSize; i++, j++) {
				res[i] = nums[index(j)];
			}
			return res;
		}
};		
```