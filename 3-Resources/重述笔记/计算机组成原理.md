---
Project: 
Status:
tags: Resources
Deadline:
CreateTime:
Connected:
---

# 指令和数据
指令和数据是应用上的概念。在内存或磁盘上，指令和数据没有任何区别 ， 都是二进制信息 。 CPU 在工作的时候把有的信息看作指令，有的信息看作数据 ， 为同样的信息赋予了不同的意义。

# 存储单元
存储器被划分成若干个存储单元，每个存储单元从 0 开始顺序编号，例如一个存储器有128 个存储单元,则编号为0~127。微型机存储器的存储单元可以存储一个 Byte , 即 8 个二进制位。
一个存储器有128个存储单元 ， 它可以存储128个Byte 。
![[uonZPfPwXUZtRIjc-564b0cd0-30be-eff1-5099-982a381d696f.png|144]]

# CPU对存储器的读写
CPU 要从内存中读数据，首先要指定存储单元的地址 。 也就是说它要先确定它要读取哪一个存储单元中的数据。
另外，在一台微机中， 不只有存储器这一种器件 。 CPU 在读写数据时还要指明，它要对哪一个器件进行操作，进行哪种操作，是从中读出数据，还是向里面写入数据。
可见， CPU 要想进行数据的读写，必须和外部器件（标准的说法是芯片）进行下面 3 类信息的交互。
1. 存储单元的地址(地址信息)
2. 器件的选择,读或写的命令(控制信息)
3. 读或写的数据

## 总线
[总 线](obsidian://bookmaster?type=open-book&bid=uonZPfPwXUZtRIjc&aid=b4118822-1e52-fe6a-251e-2f7de9b9fed6&page=17)
在计算机中专门有连接CPU 和其他芯片的导线 ， 通常称为总线。总线从物理上来讲 ， 就是一根根导线的集合。
根据传送信息的不同，总线从逻辑上又分为 3 类，地址总线、控制总线和数据总线 。
![[uonZPfPwXUZtRIjc-829bf22e-ac7c-daab-2b5f-687baa13a043.png|529]]
1. CPU 通过地址线将地址信息 3 发出。
2. CPU 通过控制线发出内存读命令，选中存储器芯片，并通知它，将要从中读取数据。
3. 存储器将 3 号单元中的数据 8 通过数据线送入 CPU 。

# 接口卡
计算机系统中，所有可用程序控制其工作的设备，必须受到 CPU 的控制 。 CPU 对外部设备都不能直接控制，如显示器 、 音箱、打印机等。 直接控制这些设备进行工作的是插在扩展插槽上的接 口卡 。 扩展插槽通过总线和 CPU 相连，所以接口卡也通过总线同 CPU相连 。 CPU 可以直接控制这些接 口 卡 ， 从而实现 CPU 对外设的间接控制。 简单地讲，就是 CPU 通过总线向接口卡发送命令，接口卡根据 CPU 的命令控制外设进行工作 。
# 各类存储器芯片
一台 PC 机中，装有多个存储器芯片，这些存储器芯片从物理连接上看是独立的 、 不同的器件。 从读写屈性上看分为两类· 随机存储器(RAM)和只读存储器(ROM) 。 随机存储器可读可写，但必须带电存储，关机后存储的内容丢失：只读存储器只能读取不能写入，关机后其中的内容不丢失。 这些存储器从功能和连接上又可分为以下几类 。
## 随机存储器
用千存放供 CPU 使用的绝大部分程序和数据， 主随机存储器一般由两个位置上的 RAM 组成，装在主板上的 RAM 和插在扩展插槽上的 RAM

## 装有BIOS的ROM
BIOS 是由主板和各类接口卡（如显卡 、 网卡等）厂商提供的软件系统，可以通过它利用该硬件设备进行最基本的输入输出 。 在主板和某些接口卡上插有存储相应BIOS 的 ROM 。 例如， 主板上的 ROM 中存储着主板的 BIOS（通常称为系统BIOS) : 显卡上的 ROM 中存储着显卡的 BIOS : 如果网卡上装有 ROM, 那其中就可以存储网卡的 BIOS 。
![[uonZPfPwXUZtRIjc-d1d981b5-947e-fa51-85c6-c70cdc83162c.png|449]]

# 内存地址空间
对于RAM和ROM，在物理上是独立的器件，但是在以下两点上相同。
- 都和CPU的总线相连
- CPU对它们进行读或写的时候都通过控制线发出内存读写命令
CPU 在操控它们的时候，把它们都当作内存来对待，把它们总的看作一个由若干存储单元组成的逻辑存储器，这个逻辑存储器就是我们所说的内存地址空间。
![[uonZPfPwXUZtRIjc-98db0330-e219-0781-27c9-486157a723ae.png|548]]
## 8086内存地址空间的分配情况
![[uonZPfPwXUZtRIjc-9983b157-8596-674a-33b7-16f45cf2776b.png|198]]
从地址 0~9FFFF 的 内存单元中读取数据，实际上就是在读取主随机存储器中的数据
向地址 A0000~BFFFF 的内存单元中写数据，就是向显存中写入数据 ，这些数据会被显示卡输出到显示器上
向地址 C0000~FFFFF 的 内存单元中写入数据的操作是无效的，因为这等千改写只读存储器中的内容 。

# 寄存器
一个典型的 CPU（此处讨论的不是某一具体的 CPU)由运算器 、 控制器 、 寄存器(CPU工作原理）等器件构成，这些器件靠内部总线相连 。 前一敢所说的总线， 相对千 CPU 内部来说是外部总线 。 内部总线实现 CPU 内部各个器件之间的联系 ， 外部总线实现 CPU 和主板上其他器件的联系。简单地说，在 CPU 中
1. 运算器进行信息处理
2. 寄存器进行信息存储
3. 控制器控制各种器件进行工作
4. 内部总线连接各种器件， 在它们之间进行数据的传送。
CPU 中的主要部件是寄存器。寄存器是 CPU 中程序员可以用指令读写的部件。程序员通过改变各种寄存器中 的 内容来实现对 CPU 的控制。
不同的 CPU, 寄存器的个数 、 结构是不相同的。 8086CPU 有 14 个寄存器，每个寄存器有一个名称 。 这些寄存器是 ： AX 、 BX 、 EX 、 DX 、 SI 、 DI 、 SP 、 BP 、 IP 、 CS 、 SS 、DS 、 ES 、 PSW。

# 端口
IO端口是接口上可直接由CPU读写的寄存器。这些端口和一些控制电路组成了整个接口电路。

按照CPU对这些端口的读写能力不同，可以将端口分为三类

1. 数据端口：CPU可读写，是CPU和外设数据交换的中转站。
2. 状态端口：CPU只读，是外设状态字的暂存地。
3. 命令端口：CPU只写，是CPU控制字的暂存地。

所以端口都可划分为以上三类。

### IO端口的编址方式

分为独立编址和统一编址两类，一般采用独立编址，即IO端口地址独立于主存储器编址。编址过程由CPU完成，不同CPU的编址方式有所不同。

[![](https://s4.ax1x.com/2022/02/16/H4S9Xj.png)](https://s4.ax1x.com/2022/02/16/H4S9Xj.png)

这样做不但少了去访问主存储器寻址的过程从而提高了速度，还将二者独立开，节省了主存储器的空间。

### 控制IO端口的IN，OUT指令

IO的作用是读写数据完成外设和CPU直接的信息交换。这个过程由IN，OUT这两个指令完成。

**IN**，CPU读一个外设数据，格式为**IN AL/AX ,PORT/DX**

**OUT**,CPU写一个数据到外设中，格式为**OUT PORT/DX ,AL/AX**

PORT是IO端口的地址。

**注意**

当IO端口用**8位**地址时，可以直接用IO端口地址直接寻址

当IO端口用**16位**地址时，必须先将IO端口的地址置于DX中，再寄存器间接寻址。

读入或写出的数据都存在AL/AX中。

另外IN，OUT操作允许两边的操作数位数不同，因为一边是寄存器一边是地址，寻址大小由寄存器大小决定。